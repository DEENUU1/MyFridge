{% load crispy_forms_tags %}

<a href="{% url 'dishes:dish-create' %}">Create new dish</a> <br>

<form method="GET" action="">
  {% csrf_token %}
  {{ main_ingredient_form|crispy }}
  {{ search_form|crispy }}
  {{ date_sorting_form|crispy }}
  {{ gluten_form|crispy }}
  {{ lactose_form|crispy }}
  {{ meat_form|crispy }}
  {{ vegan_form|crispy }}
  {{ vegetarian_form|crispy }}
  {{ country_form|crispy }}
  {{ difficulty_level_form|crispy }}
  {{ category_form|crispy }}
  {{ calories_sorting_form|crispy }}
  <button type="submit">Filtruj</button>
</form>

{% for data in object_list %}
<a href="{% url 'dishes:dish-detail' data.id %}">{{data.name}}</a> <br>
    <img src="http://127.0.0.1:8000/media/{{data.image}}"> <br>
    {{data.author}} <br>
    {{data.time_to_make}} <br>
    {{data.date_created}} <br>
    {% for ingredient in data.main_ingredient.all %}
        {% if ingredient not in main_ingredient_form.cleaned_data.ingredients %}
            <span style="color: red">{{ ingredient }}</span>
        {% else %}
            {{ ingredient }}
        {% endif %}
    {% endfor %} <br>

    <form action="{% url 'social:favourite-add' data.id %}" method="post">
      {% csrf_token %}
      <button type="submit">Add to favourite</button>
    </form>

{% endfor %}
